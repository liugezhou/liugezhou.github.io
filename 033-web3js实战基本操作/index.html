<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="å…­ä¸ªå‘¨çš„åšå®¢"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="å…­ä¸ªå‘¨"><meta name="twitter:creator" content="@liugezhou"><meta name="twitter:title" content="web3js å®æˆ˜åŸºæœ¬æ“ä½œ"><meta name="twitter:description" content="&lt;p&gt;&lt;img src=&quot;https://cdn.statically.io/gh/liugezhou/image@master/blog/033_web3js.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;span id=&quot;more&quot;&gt;&lt;/span&gt;
&lt;h2 id=&quot;æ–‡ç« è¯´æ˜&quot;&gt;æ–‡ç« è¯´æ˜&lt;/h2&gt;
&lt;p&gt;è¿™ä¸ªç¯‡æ–‡ç« çš„æ€»ç»“æ˜¯åœ¨å­¦ä¹  &lt;a href=&quot;https://www.bilibili.com/video/BV16L4y147Ly/?spm_id_from=333.337.search-card.all.click&quot;&gt;bç«™web3.jsçš„ä¸€ä¸ªåŸºç¡€æ•™ç¨‹è¯¾&lt;/a&gt; çš„è¯¾ç¨‹æ€»ç»“ï¼Œæ–¹ä¾¿åç»­åœ¨æ–‡ç« ä¸­æŸ¥æ‰¾APIã€‚&lt;/p&gt;
&lt;p&gt;å­¦ä¹ ä¸­æ¶‰åŠçš„ä¸€äº›lé›¶ç¢ä»£ç ä¸Šä¼ åˆ°äº† &lt;a href=&quot;https://github.com/liugezhou/web3.js&quot;&gt;è¿™ä¸ªä»“åº“&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;å…³äº web3js è¿™ä¸ª JS åº“çš„ç›¸å…³æ“ä½œï¼Œåç»­ä¼šæŒç»­æ›´æ–°ã€‚&lt;/p&gt;
&lt;h2 id=&quot;è·å–-web3-å¯¹è±¡&quot;&gt;è·å– web3 å¯¹è±¡&lt;/h2&gt;
&lt;p&gt;ä¸‹é¢çš„ç¤ºä¾‹ä»£ç å°±æ˜¯æŒ‡ web3 è¿™ä¸ªJSåº“çš„ä¸€äº›åŸºç¡€æ“ä½œï¼Œä¸åšä»‹ç»ã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;title class_&quot;&gt;Web3&lt;/span&gt; = &lt;span class=&quot;built_in&quot;&gt;require&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&amp;#x27;web3&amp;#x27;&lt;/span&gt;); &lt;span class=&quot;comment&quot;&gt;//å¼•å…¥web3è¿™ä¸ªåº“&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; &amp;#123; log &amp;#125; = &lt;span class=&quot;variable language_&quot;&gt;console&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// åˆ›å»ºProvider&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; provider = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;title class_&quot;&gt;Web3&lt;/span&gt;.&lt;span class=&quot;property&quot;&gt;providers&lt;/span&gt;.&lt;span class=&quot;title class_&quot;&gt;HttpProvider&lt;/span&gt;(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;string&quot;&gt;&amp;quot;http://127.0.0.1:9545&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; provider2 = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;title class_&quot;&gt;Web3&lt;/span&gt;.&lt;span class=&quot;property&quot;&gt;providers&lt;/span&gt;.&lt;span class=&quot;title class_&quot;&gt;HttpProvider&lt;/span&gt;(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;string&quot;&gt;&amp;quot;http://127.0.0.1:9999&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; web3 = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;title class_&quot;&gt;Web3&lt;/span&gt;(provider);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;title function_&quot;&gt;log&lt;/span&gt;(web3.&lt;span class=&quot;property&quot;&gt;modules&lt;/span&gt;); &lt;span class=&quot;comment&quot;&gt;// æ‰“å° web3 çš„ modules å±æ€§&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;title function_&quot;&gt;log&lt;/span&gt;(web3.&lt;span class=&quot;property&quot;&gt;version&lt;/span&gt;); &lt;span class=&quot;comment&quot;&gt;// æ‰“å° web3 çš„ç‰ˆæœ¬&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;web3.&lt;span class=&quot;property&quot;&gt;eth&lt;/span&gt;.&lt;span class=&quot;title function_&quot;&gt;getNodeInfo&lt;/span&gt;().&lt;span class=&quot;title function_&quot;&gt;then&lt;/span&gt;(log) &lt;span class=&quot;comment&quot;&gt;// æ‰“å° web3 è¿æ¥çš„èŠ‚ç‚¹ä¿¡æ¯&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;web3.&lt;span class=&quot;property&quot;&gt;eth&lt;/span&gt;.&lt;span class=&quot;property&quot;&gt;net&lt;/span&gt;.&lt;span class=&quot;title function_&quot;&gt;isListening&lt;/span&gt;().&lt;span class=&quot;title function_&quot;&gt;then&lt;/span&gt;(log)  &lt;span class=&quot;comment&quot;&gt;//è¿”å›æ‰€è¿æ¥èŠ‚ç‚¹çš„ç½‘ç»œå’Œæ£€è®¨çŠ¶æ€æ ¼å¼&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;web3.&lt;span class=&quot;property&quot;&gt;eth&lt;/span&gt;.&lt;span class=&quot;property&quot;&gt;net&lt;/span&gt;.&lt;span class=&quot;title function_&quot;&gt;getId&lt;/span&gt;().&lt;span class=&quot;title function_&quot;&gt;then&lt;/span&gt;(log) &lt;span class=&quot;comment&quot;&gt;//è·å– netWork id ç½‘ç»œå·&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;web3.&lt;span class=&quot;property&quot;&gt;eth&lt;/span&gt;.&lt;span class=&quot;title function_&quot;&gt;getProtocolVersion&lt;/span&gt;().&lt;span class=&quot;title function_&quot;&gt;then&lt;/span&gt;(log) &lt;span class=&quot;comment&quot;&gt;//è·å–ä»¥å¤ªåŠåè®®ç‰ˆæœ¬&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;title function_&quot;&gt;log&lt;/span&gt;(web3.&lt;span class=&quot;property&quot;&gt;providers&lt;/span&gt;) &lt;span class=&quot;comment&quot;&gt;//web3å¯ç”¨çš„Providers&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;title function_&quot;&gt;log&lt;/span&gt;(web3.&lt;span class=&quot;property&quot;&gt;currentProvider&lt;/span&gt;) &lt;span class=&quot;comment&quot;&gt;//web3å½“å‰æ­£åœ¨ä½¿ç”¨çš„Providers&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;title function_&quot;&gt;log&lt;/span&gt;(web3.&lt;span class=&quot;property&quot;&gt;givenProvider&lt;/span&gt;) &lt;span class=&quot;comment&quot;&gt;//æŸ¥çœ‹æµè§ˆå™¨ç¯å¢ƒè®¾ç½®çš„ web3 provider&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;web3.&lt;span class=&quot;title function_&quot;&gt;setProvider&lt;/span&gt;(provider2) &lt;span class=&quot;comment&quot;&gt;//è®¾ç½®æ–°çš„ Provider&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;æ‰¹å¤„ç†è¯·æ±‚&quot;&gt;æ‰¹å¤„ç†è¯·æ±‚&lt;/h2&gt;
&lt;p&gt;æ‰¹å¤„ç†è¯·æ±‚æ˜¯æŒ‡å‡ ä¸ªè¯·æ±‚æ‰“åŒ…åœ¨ä¸€èµ·æäº¤æäº¤ã€ä¸²è”æ‰§è¡Œ (ä¸€ä¸ªä¸ªæŒ‰é¡ºåºæ‰§è¡Œï¼Œé€Ÿåº¦ä¸å¿«ï¼Œå¯ä¿è¯ä»£ç æ‰§è¡Œé¡ºåº)&lt;/p&gt;
&lt;p&gt;é€šè¿‡&lt;code&gt;BatchRequest&lt;/code&gt;å®ç°æ‰¹å¤„ç†,æ ¸å¿ƒä»£ç ä¸ºï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;new web3.BatchRequest()&lt;/li&gt;
&lt;li&gt;add(request) // å°†è¯·æ±‚å¯¹è±¡æ·»åŠ åˆ°æ‰¹è°ƒç”¨ä¸­&lt;/li&gt;
&lt;li&gt;execute() //æ‰§è¡Œæ‰¹å¤„ç†è¯·æ±‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä»£ç ç¤ºä¾‹ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; batch = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; web3.&lt;span class=&quot;title class_&quot;&gt;BatchRequest&lt;/span&gt;();&lt;span class=&quot;comment&quot;&gt;//åˆ›å»ºæ‰¹é‡è¯·æ±‚å¯¹è±¡&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;batch.&lt;span class=&quot;title function_&quot;&gt;add&lt;/span&gt;(web3.&lt;span class=&quot;property&quot;&gt;eth&lt;/span&gt;.&lt;span class=&quot;property&quot;&gt;getBalance&lt;/span&gt;.&lt;span class=&quot;title function_&quot;&gt;request&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&amp;#x27;0xxxx&amp;#x27;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&amp;#x27;latest&amp;#x27;&lt;/span&gt;, callback)) &lt;span class=&quot;comment&quot;&gt;//æŒ‡å®šå®šçš„é’±åŒ…åœ°å€ä¿¡æ¯&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;batch.&lt;span class=&quot;title function_&quot;&gt;add&lt;/span&gt;(contract.&lt;span class=&quot;property&quot;&gt;methods&lt;/span&gt;.&lt;span class=&quot;title function_&quot;&gt;getNumber&lt;/span&gt;().&lt;span class=&quot;property&quot;&gt;call&lt;/span&gt;.&lt;span class=&quot;title function_&quot;&gt;request&lt;/span&gt;(&amp;#123; &lt;span class=&quot;attr&quot;&gt;from&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&amp;#x27;0xxxx&amp;#x27;&lt;/span&gt; &amp;#125;, callback2)) &lt;span class=&quot;comment&quot;&gt;//åˆçº¦çš„numberå€¼&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;batch.&lt;span class=&quot;title function_&quot;&gt;execute&lt;/span&gt;()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;Ganache-å®¢æˆ·ç«¯&quot;&gt;Ganache å®¢æˆ·ç«¯&lt;/h2&gt;
&lt;p&gt;é¡¹ç›®åœ¨å¯åŠ¨çš„æ—¶å€™ï¼Œç”±äºæ²¡æœ‰ ETHå¸ï¼Œäºæ˜¯:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¸‹è½½äº† Ganache è½¯ä»¶&lt;/li&gt;
&lt;li&gt;å¹¶ä¸”åœ¨æµè§ˆå™¨æ’ä»¶ä¸­è‡ªå®šä¹‰ç½‘ç»œæ¥å£ä¸º 7545&lt;/li&gt;
&lt;li&gt;è´¦æˆ· ETH å¸é€šè¿‡ Ganacheå®¢æˆ·ç«¯å¤åˆ¶ ç§é’¥å¯¼å…¥çš„æ–¹å¼è·å¾—&lt;/li&gt;
&lt;li&gt;remix éƒ¨ç½²çš„æ—¶å€™é‡‡å– Injected-MetaMaskã€åˆ‡æ¢è´¦æˆ·&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;BigNumberå¤§æ•°æ®ç­‰å¤„ç†å·¥å…·&quot;&gt;BigNumberå¤§æ•°æ®ç­‰å¤„ç†å·¥å…·&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;å¤§æ•°æ®å¤„ç†ç®€ä»‹&lt;/strong&gt;&lt;br&gt;
JSä¸­ï¼Œé»˜è®¤çš„æ•°å­—ç²¾åº¦è¾ƒå°ï¼Œå¯¹äºä»¥å¤ªåŠï¼Œæ¨èå†…éƒ¨ä»¥ wei æ¥è¡¨ç¤ºä½™é¢(å¤§æ•´æ•°)ï¼Œåªè¦æ˜¾ç¤ºä½™é¢çš„æ—¶å€™æ‰è½¬ä¸º ether æˆ–å…¶å®ƒå•ä½ã€‚&lt;br&gt;
åœ¨web3jsä¸­ï¼Œè‡ªåŠ¨æ·»åŠ ä¸€ä¸ªä¾èµ–åº“ BigNumberï¼Œç²¾åº¦éå¸¸é«˜ï¼Œä¸ä¼šä¸¢å¤±ã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; bigNumber = &lt;span class=&quot;built_in&quot;&gt;require&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&amp;#x27;bignumber.js&amp;#x27;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; n = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;title function_&quot;&gt;bigNumber&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&amp;#x27;1234356789765432123456786543213456&amp;#x27;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;title function_&quot;&gt;log&lt;/span&gt;(n)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;title function_&quot;&gt;log&lt;/span&gt;(n.&lt;span class=&quot;title function_&quot;&gt;toString&lt;/span&gt;()) &lt;span class=&quot;comment&quot;&gt;//æ‰“å°ç§‘å­¦è®¡æ•°æ³•&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;title function_&quot;&gt;log&lt;/span&gt;(n.&lt;span class=&quot;title function_&quot;&gt;toString&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;))&lt;span class=&quot;comment&quot;&gt;//ä»¥10è¿›åˆ¶æ•°å®Œæ•´æ˜¾ç¤ºï¼Œåªä¼šä¿å­˜20ä½æµ®ç‚¹è®¡æ•°(å°æ•°ç‚¹å20ä½)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;strong&gt;åˆ¤æ–­æ˜¯å¦ä¸ºå¤§æ•°&lt;/strong&gt;&lt;br&gt;
&lt;code&gt;web3.utils.isBigNumber(n)&lt;/code&gt; :æ¥åˆ¤æ–­ä¸€ä¸ªæ•°æ˜¯å¦ä¸ºå¤§æ•°ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä»¥å¤ªå•ä½è½¬æ¢&lt;/strong&gt;&lt;br&gt;
&lt;code&gt;web3.utils.fromWei(number,[unit])&lt;/code&gt; :å°†ä¸€ä¸ªæ•°å€¼è½¬æ¢ä¸ºä»¥å¤ªå•ä½&lt;br&gt;
&lt;code&gt;web3.utils.toWei(number,[unit])&lt;/code&gt;:å°†ä¸€ä¸ªå•ä½è½¬æ¢ä¸ºWei,1 etherä¸º 10çš„18æ¬¡æ–¹ wei&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ•°å€¼è½¬æ¢&lt;/strong&gt;&lt;br&gt;
&lt;code&gt;web3.utils.toHex()&lt;/code&gt;:æ•°å­—è½¬æ¢ä¸º16è¿›åˆ¶ï¼Œæ–‡æœ¬è½¬æ¢ä¸ºutf-8å­—ç¬¦ä¸²&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;åœ°å€ç›¸å…³&lt;/strong&gt;&lt;br&gt;
&lt;code&gt;web3.utils.isAddress(address)&lt;/code&gt;:æ£€æŸ¥æŒ‡å®šçš„å­—ç¬¦ä¸²æ˜¯å¦æ˜¯æœ‰æ•ˆçš„ä»¥å¤ªåŠåœ°å€ï¼Œä½¿ç”¨äº†å¤§å°å†™ä¼šæ ¡éªŒå’Œã€‚&lt;/p&gt;
&lt;h2 id=&quot;æŸ¥è¯¢åŒºå—ä¿¡æ¯&quot;&gt;æŸ¥è¯¢åŒºå—ä¿¡æ¯&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;æŸ¥è¯¢æœ€æ–°çš„åŒºå—å·ï¼ˆåŒºå—é«˜åº¦ï¼‰&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;web3.eth.getBlockNumber().then(console.log)&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æŸ¥è¯¢åŒºå—ä¿¡æ¯&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¿”å›æŒ‡å®šåŒºå—ç¼–å·æˆ–å—å“ˆå¸Œå¯¹åº”çš„å—:&lt;br&gt;
&lt;code&gt;web3.eth.getBlock(blockHashOrBlockNumber [,returnTransactionsObjects,callback])&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;blockHashOrBlockNumber ä¸ºå¯é€‰å€¼ï¼šå¯è¾“å…¥åŒºå—å·ã€åŒºå—hash ã€æˆ–è€…å­—ç¬¦ä¸²ã€â€˜earliestâ€™,â€˜latestâ€™,â€˜pendingâ€™ã€‘&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æŸ¥è¯¢å—ä¸­çš„äº¤æ˜“ä¿¡æ¯&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;web3.eth.getTransactionFromBlock(hasStringOrNumber,indexNumber)&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;hasStringOrNumberåŒä¸Šé¢çš„blockHashOrBlockNumber&lt;/p&gt;
&lt;p&gt;indexNumberï¼šåŒºå—ä¸­äº¤æ˜“çš„ç´¢å¼•ï¼Œä»0å¼€å§‹&lt;br&gt;
æ˜¾ç¤ºçš„å†…å®¹å’Œ getBlock è®¾ç½®ä¸ºtrueåè¿”å›çš„ transactions äº¤æ˜“ä¿¡æ¯ä¸€è‡´&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æŸ¥è¯¢å—ä¸­çš„äº¤æ˜“æ•°é‡&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;web3.eth.getBlockTransactionCount(blockHashOrBlockNumber [,callback])&lt;/code&gt;&lt;/p&gt;
&lt;h2 id=&quot;Web3-jsäº¤æ˜“æ“ä½œ&quot;&gt;Web3.jsäº¤æ˜“æ“ä½œ&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;è´¦æˆ·ç›¸å…³æ“ä½œ&lt;/strong&gt;&lt;br&gt;
è¿”å›å½“å‰èŠ‚ç‚¹æ§åˆ¶çš„è´¦æˆ·åˆ—è¡¨ï¼š&lt;br&gt;
&lt;code&gt;web3.eth.getAccounts()&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;åˆ›å»ºä¸€ä¸ªæ–°è´¦æˆ·ï¼š&lt;br&gt;
&lt;code&gt;web3.eth.personal.newAccount(password,[callback])&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;è·å¾—å½“å‰æ¥æ”¶æŒ–çŸ¿å¥–åŠ±çš„è´¦æˆ·åœ°å€ï¼š&lt;br&gt;
&lt;code&gt;web3.eth.getCoinbase()&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;äº¤æ˜“ç›¸å…³æ“ä½œ&lt;/strong&gt;&lt;br&gt;
&lt;code&gt;web3.eth.getBalance(address,[defaultBlock])&lt;/code&gt;:è·å¾—æŒ‡å®šåŒºå—ä¸­ç‰¹å®šè´¦æˆ·åœ°å€çš„ä½™é¢&lt;br&gt;
&lt;code&gt;web3.eth.getGasPrice()&lt;/code&gt;:æ ¹æ®æœ€è¿‘å‡ ä¸ªåŒºå—ï¼Œè®¡ç®—å¹³å‡gasä»·æ ¼&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;äº¤æ˜“æ‰§è¡Œç›¸å…³æ“ä½œ&lt;/strong&gt;&lt;br&gt;
å‘ä»¥å¤ªç½‘ç»œæäº¤ä¸€ä¸ªäº¤æ˜“ï¼š&lt;br&gt;
&lt;code&gt;web3.eth.sendTransaction(transactionObject [,callback])&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;transactionObjectå‚æ•°è¯´æ˜ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;from: å‘é€è€…åœ°å€&lt;/li&gt;
&lt;li&gt;to: å¯é€‰å‚æ•°ï¼Œæ¥æ”¶è€…åœ°å€ï¼Œè‹¥å‘é€çš„ä¸ºåˆçº¦ï¼Œåˆ™ä¸ºç©º&lt;/li&gt;
&lt;li&gt;value: å‘é€çš„å¸&lt;/li&gt;
&lt;li&gt;gas: gasçš„é™åˆ¶&lt;/li&gt;
&lt;li&gt;gsaPrice: æ¯ä¸ªgasçš„ä»·æ ¼&lt;/li&gt;
&lt;li&gt;data: è‹¥å‘é€çš„ä¸ºåˆçº¦ï¼Œåˆ™ä¸ºå½“å‰åˆçº¦çš„ ABI æ–‡ä»¶ï¼Œå¦åˆ™ä¸ºè¯´æ˜ä¿¡æ¯&lt;/li&gt;
&lt;li&gt;noce: è´¦æˆ·çš„å‰ä¸€ä¸ªäº¤æ˜“è®¡æ•°ï¼Œè¿™ä¸ªæ•°å¿…é¡»æ˜¯åå…­è¿›åˆ¶ï¼Œ web3.utils.toHex()è¿›è¡Œè½¬æ¢&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&quot;./%E9%92%B1%E5%8C%85%E8%BD%AC%E9%92%B1%E5%8C%85.js&quot;&gt;ç¤ºä¾‹ä»£ç &lt;/a&gt;&lt;/p&gt;
&lt;p&gt;è¿”å›å…·æœ‰æŒ‡å®šå“ˆå¸Œå€¼çš„äº¤æ˜“å¯¹è±¡ã€æŸ¥çœ‹äº¤æ˜“ç»†èŠ‚ï¼š&lt;br&gt;
&lt;code&gt;web3.eth.getTransaction()&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;è¿”å›æŒ‡å®šäº¤æ˜“çš„æ”¶æ®å¯¹è±¡ï¼Œå¦‚æœäº¤æ˜“æ˜¯pendingï¼Œè¿”å›nullï¼š&lt;br&gt;
&lt;code&gt;web3.eth.getTransactionReceipt()&lt;/code&gt;&lt;/p&gt;
&lt;h2 id=&quot;Web3-js-åˆçº¦äº¤äº’&quot;&gt;Web3.js åˆçº¦äº¤äº’&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;åº”ç”¨ç¨‹åºäºŒè¿›åˆ¶æ¥å£(ABI)&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ABIæ–‡ä»¶ä»¥JSONå½¢å¼è¡¨ç¤ºï¼Œåœ¨JSONæ–‡ä»¶ä¸­ï¼Œä¸èƒ½å†™æ³¨é‡Š.&lt;/p&gt;
&lt;p&gt;ABIè¡¨ç°å½¢å¼ï¼šfunctionsã€events&lt;/p&gt;
&lt;p&gt;ä½œç”¨ï¼šå°†è¿™äº›ABIæ–‡ä»¶ä¼ é€’ç»™web3.js(æˆ–å…¶å®ƒsdk)ï¼Œæ ¹æ®è¿™äº›æ¥å£ç±»å‹æ„å»ºå‡ºjså¯¹è±¡ï¼Œjså¯¹è±¡æ“ä½œåˆçº¦ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;åˆ›å»ºåˆçº¦&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åˆçº¦ä¸­å¯ç”¨ç¼–å†™çš„å†…å®¹ï¼šå‡½æ•°ã€ç»“æ„ä½“ã€æ„é€ å‡½æ•°ã€çŠ¶æ€å˜é‡ã€äº‹ä»¶ã€æšä¸¾ç±»å‹ç­‰ã€‚&lt;/p&gt;
&lt;p&gt;åˆçº¦è¦éƒ¨ç½²åˆ°åŒºå—é“¾ï¼Œéœ€è¦ç¼–è¯‘ä¸º å­—èŠ‚ç æ–‡ä»¶(remixä¸­å¯ç›´æ¥å¤åˆ¶)ã€‚&lt;/p&gt;
&lt;p&gt;åˆçº¦è¦æƒ³è¢«å¤–éƒ¨åº”ç”¨ç¨‹åºè®¿é—®ï¼Œéœ€è¦ç¼–è¯‘ ABIæ–‡ä»¶(remixä¸­å¯ç›´æ¥å¤åˆ¶)ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;jsåœ¨åŒºå—é“¾ä¸Šéƒ¨ç½²åˆçº¦&lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight stylus&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;contract&lt;span class=&quot;selector-class&quot;&gt;.deploy&lt;/span&gt;(&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  data:data&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;)&lt;span class=&quot;selector-class&quot;&gt;.send&lt;/span&gt;(&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  from:&lt;span class=&quot;string&quot;&gt;&amp;#x27;&amp;#x27;&lt;/span&gt;, &lt;span class=&quot;comment&quot;&gt;//ä»å“ªä¸ªè´¦æˆ·å‘é€&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  gas:&lt;span class=&quot;number&quot;&gt;150000&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  gasPrice:&lt;span class=&quot;string&quot;&gt;&amp;#x27;1000000&amp;#x27;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;,&lt;span class=&quot;built_in&quot;&gt;function&lt;/span&gt;(err,transactionHash)&amp;#123;&lt;span class=&quot;built_in&quot;&gt;log&lt;/span&gt;(transactionHash)&amp;#125;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/liugezhou/web3.js/blob/main/deploy.js&quot;&gt;ç¤ºä¾‹ä»£ç &lt;/a&gt;ï¼šè¿™çš„ä»£ç æ˜¯æŒ‡ï¼Œä¸æ˜¯é€šè¿‡ remix çš„ å‘å¸ƒæŒ‰é’®ï¼Œè€Œæ˜¯é€šè¿‡è‡ªå·±å†™çš„jsè„šæœ¬å»å‘å¸ƒçš„ä¸€ä¸ªåˆçº¦ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;è°ƒç”¨åˆçº¦å‡½æ•°&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;è°ƒç”¨æ™ºèƒ½åˆçº¦è¯»(view,pure)å‡½æ•°æ—¶ï¼Œä¸€èˆ¬ä½¿ç”¨callï¼Œæ— æ”¶è´¹ï¼Œä½†æœ‰gasè´¹ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;code&gt;myContract.methods.myMethod([param1 [,p2]]).call(options [,defaultBlock] [,callback])&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;myMethodä¸ºåˆçº¦ä¸­çš„æ–¹æ³•å&lt;/li&gt;
&lt;li&gt;params1 ä¸ºå‡½æ•°çš„å‚æ•°&lt;/li&gt;
&lt;li&gt;optionså‚æ•°è¯´æ˜ï¼š
&lt;ul&gt;
&lt;li&gt;from:String å¯é€‰ è°ƒç”¨äº¤æ˜“çš„åœ°å€&lt;/li&gt;
&lt;li&gt;gasPrice:String å¯é€‰ï¼Œäº¤æ˜“çš„æ¯ä¸ªGasçš„ä»·æ ¼&lt;/li&gt;
&lt;li&gt;gasï¼šNumberå¯é€‰ï¼Œäº¤æ˜“çš„Gasé™åˆ¶&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start=&quot;2&quot;&gt;
&lt;li&gt;è°ƒç”¨æ™ºèƒ½åˆçº¦å†™å‡½æ•°ï¼šç›¸å½“äºå‘é€äº†äº¤æ˜“&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;code&gt;MyContract.methods.myMethod([params [,param2]]).send(options [,callback])&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;optionså‚æ•°è¯´æ˜ï¼š
&lt;ul&gt;
&lt;li&gt;from:String å¯é€‰ è°ƒç”¨äº¤æ˜“çš„åœ°å€&lt;/li&gt;
&lt;li&gt;gasPrice:String å¯é€‰ï¼Œäº¤æ˜“çš„æ¯ä¸ªGasçš„ä»·æ ¼&lt;/li&gt;
&lt;li&gt;gasï¼šNumberå¯é€‰ï¼Œäº¤æ˜“çš„Gasé™åˆ¶&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;è¿”å›çš„ç»“æœè§¦å‘äº‹ä»¶ï¼š
&lt;ul&gt;
&lt;li&gt;transactionHash: stringï¼Œå‘é€äº¤æ˜“ä¸”å¾—åˆ°äº¤æ˜“å“ˆå¸Œå€¼åç«‹å³è§¦å‘&lt;/li&gt;
&lt;li&gt;receiptï¼šobjectã€‚ä»¥äº‹ä»¶åç§°ä¸ºé”®ï¼Œä»¥äº‹ä»¶æœ¬èº«ä¸ºå±æ€§å€¼çš„ events&lt;/li&gt;
&lt;li&gt;confirmationï¼šnumberã€‚è§¦å‘æ—¶ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºæ¥æ”¶åˆ°çš„ç¡®è®¤æ•°ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºæ”¶åˆ°äº¤æ˜“æ•°æ®&lt;/li&gt;
&lt;li&gt;errorï¼šäº¤æ˜“å‘ç”Ÿè¿‡ç¨‹ä¸­å‡ºé”™æ—¶è§¦å‘&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;è°ƒç”¨åˆçº¦äº‹ä»¶&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;MyContract.methods.emitEvent(&amp;quot;eventName&amp;quot;).send(options [,callback])&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ‰§è¡Œäº‹ä»¶æŸ¥è¯¢&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åŒºå—é“¾æ˜¯ç”±ä¸€ä¸ªä¸ªåŒºå—ç»„æˆçš„åˆ—è¡¨ï¼Œè¿™äº›å—çš„å†…å®¹åŸºæœ¬ä¸Šæ˜¯äº¤æ˜“è®°å½•ã€‚&lt;br&gt;
æ¯ä¸ªäº¤æ˜“éƒ½æœ‰ä¸€ä¸ªäº¤æ˜“æ—¥å¿—ï¼Œäº‹ä»¶ç»“æœå­˜æ”¾åœ¨äº¤æ˜“æ—¥å¿—é‡Œã€‚&lt;br&gt;
åˆçº¦å‘å‡ºçš„äº‹ä»¶å¯ä»¥ä½¿ç”¨åˆçº¦åœ°å€è®¿é—®&lt;/p&gt;
&lt;p&gt;&lt;code&gt;MyContract.getPassEvents(event [,options] [,callback])&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;event: â€˜AllEventsâ€™ //è·å–å…¨éƒ¨äº‹ä»¶&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;Web-jsåº”ç”¨æ¡ˆä¾‹&quot;&gt;Web.jsåº”ç”¨æ¡ˆä¾‹&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/liugezhou/web3.js/tree/main/demo&quot;&gt;ä»£ç ç¤ºä¾‹&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;éœ€æ±‚ï¼šç®€å•åˆ›å»ºæŠ•ç¥¨DApp&lt;/strong&gt;&lt;br&gt;
ä¸åŒºå—è¿›è¡Œé€šä¿¡çš„æ–¹å¼æ˜¯é€šè¿‡ RPCï¼ˆRemote Procedure Call)&lt;br&gt;
web3.jsæ˜¯ä¸€ä¸ªjsåº“ï¼ŒæŠ½è±¡å‡ºäº†æ‰€æœ‰çš„ RPC è°ƒç”¨ï¼Œä¾¿äºé€šè¿‡ jsä¸åŒºå—é“¾è¿›è¡Œäº¤äº’ã€‚&lt;br&gt;
å®ç°ä¸€ä¸ªæœ€ç®€å•çš„æŠ•ç¥¨DApp&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;åˆ›å»ºåˆçº¦&lt;/strong&gt;&lt;br&gt;
å†™ä¸€ä¸ªå«åš Voting çš„åˆçº¦ï¼Œåˆçº¦çš„å†…å®¹&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åˆå§‹åŒ–å€™é€‰è€…&lt;/li&gt;
&lt;li&gt;ç”¨æ¥æŠ•ç¥¨çš„æ–¹æ³•&lt;/li&gt;
&lt;li&gt;è¿”å›å€™é€‰è€…æ‰€è·å¾—çš„æ€»ç¥¨æ•°&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/liugezhou/web3.js/blob/main/demo/Voting.sol&quot;&gt;åˆçº¦ä»£ç &lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;éƒ¨ç½²åˆçº¦&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å°†ä»¥ä¸Šsolæ–‡ä»¶åœ¨ remix ä¸­ç¼–å†™ã€‚&lt;br&gt;
å‘å¸ƒåˆ° External Http Providerï¼ˆé€‰æ‹©å€’æ•°ç¬¬äºŒä¸ªè´¦æˆ·å‘å¸ƒï¼‰&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å‘å¸ƒæ—¶ï¼Œéœ€è¦ä¼ å…¥åå…­è¿›åˆ¶å‚æ•°ï¼Œé€šè¿‡ &lt;a href=&quot;https://github.com/liugezhou/web3.js/blob/main/demo/DemoUtils.js&quot;&gt;web3.utils.toHex&lt;/a&gt; è½¬æˆä¸€ä¸ªä¸‰ä¸ªå€™é€‰äººçš„æ•°æ®åï¼Œåœ¨deployä¸­åŠ å…¥æ•°ç»„å‚æ•°ï¼Œå‘ç° remix ä¸æ”¯æŒéƒ¨ç½²&lt;/li&gt;
&lt;li&gt;äºæ˜¯ä½¿ç”¨ web3.jså‘å¸ƒçš„æ–¹å¼å®ç°  &lt;a href=&quot;https://github.com/liugezhou/web3.js/blob/main/demo/DeployUtils.js&quot;&gt;DeployUtils.js ä»£ç ç¤ºä¾‹&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;é€šè¿‡æ­¥éª¤ä¸€å‘å¸ƒï¼Œæ­¥éª¤äºŒæµ‹è¯•æ£€æŸ¥&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;ç½‘é¡µäº¤äº’&lt;/strong&gt;&lt;br&gt;
&lt;a href=&quot;https://github.com/liugezhou/drag/blob/main/src/view/HelloWorld.vue&quot;&gt;å‰ç«¯å†…å®¹ä»£ç &lt;/a&gt;&lt;/p&gt;
"><meta name="twitter:image" content="https://cdn.statically.io/gh/liugezhou/image@master/blog/033_web3js.png"><title>web3js å®æˆ˜åŸºæœ¬æ“ä½œ | å…­ä¸ªå‘¨</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=1.0.3"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/normalize/latest/normalize.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/latest/pure-min.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/latest/grids-responsive-min.min.css"><link rel="stylesheet" href="//lib.baomitu.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//lib.baomitu.com/jquery/latest/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement('script');
  hm.src = 'https://hm.baidu.com/hm.js?' + '912656f1f71687bc80e68bfc7315fc4c';
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
  })();
</script><script type="text/javascript" src="//lib.baomitu.com/clipboard.js/latest/clipboard.min.js"></script><script type="text/javascript" src="//lib.baomitu.com/toastr.js/latest/toastr.min.js"></script><link rel="stylesheet" href="//lib.baomitu.com/toastr.js/latest/toastr.min.css"><div class="darkmode-toggle">ğŸŒ“</div><script>var prefersDarkMode = window.matchMedia('(prefers-color-scheme: dark)');
var toggle = document.querySelector('.darkmode-toggle');
var html = document.querySelector('html');

html.dataset.dark = localStorage.dark || prefersDarkMode.matches;

toggle.addEventListener('click', () => {
localStorage.dark = !(html.dataset.dark == 'true');
html.dataset.dark = localStorage.dark;
});</script><meta name="generator" content="Hexo 6.3.0"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">web3js å®æˆ˜åŸºæœ¬æ“ä½œ</h1><a id="logo" href="/.">å…­ä¸ªå‘¨</a><p class="description">ä¸€ä¸ªäººåªæœ‰ä¸€ç§å‘½è¿ï¼Œæ—©æ—¥ç›¸é‡ï¼Œå°½æƒ…æ‹¥æŠ±ã€‚</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> é¦–é¡µ</i></a><a href="/archives/"><i class="fa fa-archive"> å½’æ¡£</i></a><a href="/about/"><i class="fa fa-user"> å…³äº</i></a><a target="_blank" rel="noopener" href="https://www.travellings.cn/go.html"><i class="fa fa-subway"> å¼€å¾€</i></a><a href="/atom.xml"><i class="fa fa-rss"> è®¢é˜…</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">web3js å®æˆ˜åŸºæœ¬æ“ä½œ</h1><div class="post-meta">2023-02-15<span> | </span><span class="category"><a href="/categories/Web3/">Web3</a></span><script src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> é˜…è¯»</span></span><span class="post-time"><span class="post-meta-item-text"> | </span><span class="post-meta-item-icon"><i class="fa fa-keyboard-o"></i><span class="post-count"> 2.1k</span><span class="post-meta-item-text"> å­—</span></span></span><span class="post-time"> | <span class="post-meta-item-icon"><i class="fa fa-clock-o"></i><span class="post-count"> 8</span><span class="post-meta-item-text"> åˆ†é’Ÿ</span></span></span></div><a class="disqus-comment-count" href="/033-web3js%E5%AE%9E%E6%88%98%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/#vcomment"><span class="valine-comment-count" data-xid="/033-web3js%E5%AE%9E%E6%88%98%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/"></span><span> æ¡è¯„è®º</span></a><div class="clear"><div class="toc-article" id="toc"><div class="toc-title">æ–‡ç« ç›®å½•</div><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E7%AB%A0%E8%AF%B4%E6%98%8E"><span class="toc-text">æ–‡ç« è¯´æ˜</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96-web3-%E5%AF%B9%E8%B1%A1"><span class="toc-text">è·å– web3 å¯¹è±¡</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%89%B9%E5%A4%84%E7%90%86%E8%AF%B7%E6%B1%82"><span class="toc-text">æ‰¹å¤„ç†è¯·æ±‚</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Ganache-%E5%AE%A2%E6%88%B7%E7%AB%AF"><span class="toc-text">Ganache å®¢æˆ·ç«¯</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#BigNumber%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%AD%89%E5%A4%84%E7%90%86%E5%B7%A5%E5%85%B7"><span class="toc-text">BigNumberå¤§æ•°æ®ç­‰å¤„ç†å·¥å…·</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E5%8C%BA%E5%9D%97%E4%BF%A1%E6%81%AF"><span class="toc-text">æŸ¥è¯¢åŒºå—ä¿¡æ¯</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Web3-js%E4%BA%A4%E6%98%93%E6%93%8D%E4%BD%9C"><span class="toc-text">Web3.jsäº¤æ˜“æ“ä½œ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Web3-js-%E5%90%88%E7%BA%A6%E4%BA%A4%E4%BA%92"><span class="toc-text">Web3.js åˆçº¦äº¤äº’</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Web-js%E5%BA%94%E7%94%A8%E6%A1%88%E4%BE%8B"><span class="toc-text">Web.jsåº”ç”¨æ¡ˆä¾‹</span></a></li></ol></div></div><div class="post-content"><p><img src="https://cdn.statically.io/gh/liugezhou/image@master/blog/033_web3js.png" alt=""></p>
<span id="more"></span>
<h2 id="æ–‡ç« è¯´æ˜">æ–‡ç« è¯´æ˜</h2>
<p>è¿™ä¸ªç¯‡æ–‡ç« çš„æ€»ç»“æ˜¯åœ¨å­¦ä¹  <a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV16L4y147Ly/?spm_id_from=333.337.search-card.all.click">bç«™web3.jsçš„ä¸€ä¸ªåŸºç¡€æ•™ç¨‹è¯¾</a> çš„è¯¾ç¨‹æ€»ç»“ï¼Œæ–¹ä¾¿åç»­åœ¨æ–‡ç« ä¸­æŸ¥æ‰¾APIã€‚</p>
<p>å­¦ä¹ ä¸­æ¶‰åŠçš„ä¸€äº›lé›¶ç¢ä»£ç ä¸Šä¼ åˆ°äº† <a target="_blank" rel="noopener" href="https://github.com/liugezhou/web3.js">è¿™ä¸ªä»“åº“</a>ã€‚</p>
<p>å…³äº web3js è¿™ä¸ª JS åº“çš„ç›¸å…³æ“ä½œï¼Œåç»­ä¼šæŒç»­æ›´æ–°ã€‚</p>
<h2 id="è·å–-web3-å¯¹è±¡">è·å– web3 å¯¹è±¡</h2>
<p>ä¸‹é¢çš„ç¤ºä¾‹ä»£ç å°±æ˜¯æŒ‡ web3 è¿™ä¸ªJSåº“çš„ä¸€äº›åŸºç¡€æ“ä½œï¼Œä¸åšä»‹ç»ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="title class_">Web3</span> = <span class="built_in">require</span>(<span class="string">&#x27;web3&#x27;</span>); <span class="comment">//å¼•å…¥web3è¿™ä¸ªåº“</span></span><br><span class="line"><span class="keyword">const</span> &#123; log &#125; = <span class="variable language_">console</span></span><br><span class="line"><span class="comment">// åˆ›å»ºProvider</span></span><br><span class="line"><span class="keyword">const</span> provider = <span class="keyword">new</span> <span class="title class_">Web3</span>.<span class="property">providers</span>.<span class="title class_">HttpProvider</span>(</span><br><span class="line">  <span class="string">&quot;http://127.0.0.1:9545&quot;</span></span><br><span class="line">);</span><br><span class="line"><span class="keyword">const</span> provider2 = <span class="keyword">new</span> <span class="title class_">Web3</span>.<span class="property">providers</span>.<span class="title class_">HttpProvider</span>(</span><br><span class="line">  <span class="string">&quot;http://127.0.0.1:9999&quot;</span></span><br><span class="line">);</span><br><span class="line"><span class="keyword">let</span> web3 = <span class="keyword">new</span> <span class="title class_">Web3</span>(provider);</span><br><span class="line"></span><br><span class="line"><span class="title function_">log</span>(web3.<span class="property">modules</span>); <span class="comment">// æ‰“å° web3 çš„ modules å±æ€§</span></span><br><span class="line"><span class="title function_">log</span>(web3.<span class="property">version</span>); <span class="comment">// æ‰“å° web3 çš„ç‰ˆæœ¬</span></span><br><span class="line"></span><br><span class="line">web3.<span class="property">eth</span>.<span class="title function_">getNodeInfo</span>().<span class="title function_">then</span>(log) <span class="comment">// æ‰“å° web3 è¿æ¥çš„èŠ‚ç‚¹ä¿¡æ¯</span></span><br><span class="line">web3.<span class="property">eth</span>.<span class="property">net</span>.<span class="title function_">isListening</span>().<span class="title function_">then</span>(log)  <span class="comment">//è¿”å›æ‰€è¿æ¥èŠ‚ç‚¹çš„ç½‘ç»œå’Œæ£€è®¨çŠ¶æ€æ ¼å¼</span></span><br><span class="line">web3.<span class="property">eth</span>.<span class="property">net</span>.<span class="title function_">getId</span>().<span class="title function_">then</span>(log) <span class="comment">//è·å– netWork id ç½‘ç»œå·</span></span><br><span class="line">web3.<span class="property">eth</span>.<span class="title function_">getProtocolVersion</span>().<span class="title function_">then</span>(log) <span class="comment">//è·å–ä»¥å¤ªåŠåè®®ç‰ˆæœ¬</span></span><br><span class="line"></span><br><span class="line"><span class="title function_">log</span>(web3.<span class="property">providers</span>) <span class="comment">//web3å¯ç”¨çš„Providers</span></span><br><span class="line"><span class="title function_">log</span>(web3.<span class="property">currentProvider</span>) <span class="comment">//web3å½“å‰æ­£åœ¨ä½¿ç”¨çš„Providers</span></span><br><span class="line"><span class="title function_">log</span>(web3.<span class="property">givenProvider</span>) <span class="comment">//æŸ¥çœ‹æµè§ˆå™¨ç¯å¢ƒè®¾ç½®çš„ web3 provider</span></span><br><span class="line">web3.<span class="title function_">setProvider</span>(provider2) <span class="comment">//è®¾ç½®æ–°çš„ Provider</span></span><br></pre></td></tr></table></figure>
<h2 id="æ‰¹å¤„ç†è¯·æ±‚">æ‰¹å¤„ç†è¯·æ±‚</h2>
<p>æ‰¹å¤„ç†è¯·æ±‚æ˜¯æŒ‡å‡ ä¸ªè¯·æ±‚æ‰“åŒ…åœ¨ä¸€èµ·æäº¤æäº¤ã€ä¸²è”æ‰§è¡Œ (ä¸€ä¸ªä¸ªæŒ‰é¡ºåºæ‰§è¡Œï¼Œé€Ÿåº¦ä¸å¿«ï¼Œå¯ä¿è¯ä»£ç æ‰§è¡Œé¡ºåº)</p>
<p>é€šè¿‡<code>BatchRequest</code>å®ç°æ‰¹å¤„ç†,æ ¸å¿ƒä»£ç ä¸ºï¼š</p>
<ul>
<li>new web3.BatchRequest()</li>
<li>add(request) // å°†è¯·æ±‚å¯¹è±¡æ·»åŠ åˆ°æ‰¹è°ƒç”¨ä¸­</li>
<li>execute() //æ‰§è¡Œæ‰¹å¤„ç†è¯·æ±‚</li>
</ul>
<p>ä»£ç ç¤ºä¾‹ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> batch = <span class="keyword">new</span> web3.<span class="title class_">BatchRequest</span>();<span class="comment">//åˆ›å»ºæ‰¹é‡è¯·æ±‚å¯¹è±¡</span></span><br><span class="line">batch.<span class="title function_">add</span>(web3.<span class="property">eth</span>.<span class="property">getBalance</span>.<span class="title function_">request</span>(<span class="string">&#x27;0xxxx&#x27;</span>, <span class="string">&#x27;latest&#x27;</span>, callback)) <span class="comment">//æŒ‡å®šå®šçš„é’±åŒ…åœ°å€ä¿¡æ¯</span></span><br><span class="line">batch.<span class="title function_">add</span>(contract.<span class="property">methods</span>.<span class="title function_">getNumber</span>().<span class="property">call</span>.<span class="title function_">request</span>(&#123; <span class="attr">from</span>: <span class="string">&#x27;0xxxx&#x27;</span> &#125;, callback2)) <span class="comment">//åˆçº¦çš„numberå€¼</span></span><br><span class="line">batch.<span class="title function_">execute</span>()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="Ganache-å®¢æˆ·ç«¯">Ganache å®¢æˆ·ç«¯</h2>
<p>é¡¹ç›®åœ¨å¯åŠ¨çš„æ—¶å€™ï¼Œç”±äºæ²¡æœ‰ ETHå¸ï¼Œäºæ˜¯:</p>
<ul>
<li>ä¸‹è½½äº† Ganache è½¯ä»¶</li>
<li>å¹¶ä¸”åœ¨æµè§ˆå™¨æ’ä»¶ä¸­è‡ªå®šä¹‰ç½‘ç»œæ¥å£ä¸º 7545</li>
<li>è´¦æˆ· ETH å¸é€šè¿‡ Ganacheå®¢æˆ·ç«¯å¤åˆ¶ ç§é’¥å¯¼å…¥çš„æ–¹å¼è·å¾—</li>
<li>remix éƒ¨ç½²çš„æ—¶å€™é‡‡å– Injected-MetaMaskã€åˆ‡æ¢è´¦æˆ·</li>
</ul>
<h2 id="BigNumberå¤§æ•°æ®ç­‰å¤„ç†å·¥å…·">BigNumberå¤§æ•°æ®ç­‰å¤„ç†å·¥å…·</h2>
<p><strong>å¤§æ•°æ®å¤„ç†ç®€ä»‹</strong><br>
JSä¸­ï¼Œé»˜è®¤çš„æ•°å­—ç²¾åº¦è¾ƒå°ï¼Œå¯¹äºä»¥å¤ªåŠï¼Œæ¨èå†…éƒ¨ä»¥ wei æ¥è¡¨ç¤ºä½™é¢(å¤§æ•´æ•°)ï¼Œåªè¦æ˜¾ç¤ºä½™é¢çš„æ—¶å€™æ‰è½¬ä¸º ether æˆ–å…¶å®ƒå•ä½ã€‚<br>
åœ¨web3jsä¸­ï¼Œè‡ªåŠ¨æ·»åŠ ä¸€ä¸ªä¾èµ–åº“ BigNumberï¼Œç²¾åº¦éå¸¸é«˜ï¼Œä¸ä¼šä¸¢å¤±ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> bigNumber = <span class="built_in">require</span>(<span class="string">&#x27;bignumber.js&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> n = <span class="keyword">new</span> <span class="title function_">bigNumber</span>(<span class="string">&#x27;1234356789765432123456786543213456&#x27;</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(n)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(n.<span class="title function_">toString</span>()) <span class="comment">//æ‰“å°ç§‘å­¦è®¡æ•°æ³•</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(n.<span class="title function_">toString</span>(<span class="number">10</span>))<span class="comment">//ä»¥10è¿›åˆ¶æ•°å®Œæ•´æ˜¾ç¤ºï¼Œåªä¼šä¿å­˜20ä½æµ®ç‚¹è®¡æ•°(å°æ•°ç‚¹å20ä½)</span></span><br></pre></td></tr></table></figure>
<p><strong>åˆ¤æ–­æ˜¯å¦ä¸ºå¤§æ•°</strong><br>
<code>web3.utils.isBigNumber(n)</code> :æ¥åˆ¤æ–­ä¸€ä¸ªæ•°æ˜¯å¦ä¸ºå¤§æ•°ã€‚</p>
<p><strong>ä»¥å¤ªå•ä½è½¬æ¢</strong><br>
<code>web3.utils.fromWei(number,[unit])</code> :å°†ä¸€ä¸ªæ•°å€¼è½¬æ¢ä¸ºä»¥å¤ªå•ä½<br>
<code>web3.utils.toWei(number,[unit])</code>:å°†ä¸€ä¸ªå•ä½è½¬æ¢ä¸ºWei,1 etherä¸º 10çš„18æ¬¡æ–¹ wei</p>
<p><strong>æ•°å€¼è½¬æ¢</strong><br>
<code>web3.utils.toHex()</code>:æ•°å­—è½¬æ¢ä¸º16è¿›åˆ¶ï¼Œæ–‡æœ¬è½¬æ¢ä¸ºutf-8å­—ç¬¦ä¸²</p>
<p><strong>åœ°å€ç›¸å…³</strong><br>
<code>web3.utils.isAddress(address)</code>:æ£€æŸ¥æŒ‡å®šçš„å­—ç¬¦ä¸²æ˜¯å¦æ˜¯æœ‰æ•ˆçš„ä»¥å¤ªåŠåœ°å€ï¼Œä½¿ç”¨äº†å¤§å°å†™ä¼šæ ¡éªŒå’Œã€‚</p>
<h2 id="æŸ¥è¯¢åŒºå—ä¿¡æ¯">æŸ¥è¯¢åŒºå—ä¿¡æ¯</h2>
<p><strong>æŸ¥è¯¢æœ€æ–°çš„åŒºå—å·ï¼ˆåŒºå—é«˜åº¦ï¼‰</strong></p>
<p><code>web3.eth.getBlockNumber().then(console.log)</code></p>
<p><strong>æŸ¥è¯¢åŒºå—ä¿¡æ¯</strong></p>
<p>è¿”å›æŒ‡å®šåŒºå—ç¼–å·æˆ–å—å“ˆå¸Œå¯¹åº”çš„å—:<br>
<code>web3.eth.getBlock(blockHashOrBlockNumber [,returnTransactionsObjects,callback])</code></p>
<p>blockHashOrBlockNumber ä¸ºå¯é€‰å€¼ï¼šå¯è¾“å…¥åŒºå—å·ã€åŒºå—hash ã€æˆ–è€…å­—ç¬¦ä¸²ã€â€˜earliestâ€™,â€˜latestâ€™,â€˜pendingâ€™ã€‘</p>
<p><strong>æŸ¥è¯¢å—ä¸­çš„äº¤æ˜“ä¿¡æ¯</strong></p>
<p><code>web3.eth.getTransactionFromBlock(hasStringOrNumber,indexNumber)</code></p>
<p>hasStringOrNumberåŒä¸Šé¢çš„blockHashOrBlockNumber</p>
<p>indexNumberï¼šåŒºå—ä¸­äº¤æ˜“çš„ç´¢å¼•ï¼Œä»0å¼€å§‹<br>
æ˜¾ç¤ºçš„å†…å®¹å’Œ getBlock è®¾ç½®ä¸ºtrueåè¿”å›çš„ transactions äº¤æ˜“ä¿¡æ¯ä¸€è‡´</p>
<p><strong>æŸ¥è¯¢å—ä¸­çš„äº¤æ˜“æ•°é‡</strong></p>
<p><code>web3.eth.getBlockTransactionCount(blockHashOrBlockNumber [,callback])</code></p>
<h2 id="Web3-jsäº¤æ˜“æ“ä½œ">Web3.jsäº¤æ˜“æ“ä½œ</h2>
<p><strong>è´¦æˆ·ç›¸å…³æ“ä½œ</strong><br>
è¿”å›å½“å‰èŠ‚ç‚¹æ§åˆ¶çš„è´¦æˆ·åˆ—è¡¨ï¼š<br>
<code>web3.eth.getAccounts()</code></p>
<p>åˆ›å»ºä¸€ä¸ªæ–°è´¦æˆ·ï¼š<br>
<code>web3.eth.personal.newAccount(password,[callback])</code></p>
<p>è·å¾—å½“å‰æ¥æ”¶æŒ–çŸ¿å¥–åŠ±çš„è´¦æˆ·åœ°å€ï¼š<br>
<code>web3.eth.getCoinbase()</code></p>
<p><strong>äº¤æ˜“ç›¸å…³æ“ä½œ</strong><br>
<code>web3.eth.getBalance(address,[defaultBlock])</code>:è·å¾—æŒ‡å®šåŒºå—ä¸­ç‰¹å®šè´¦æˆ·åœ°å€çš„ä½™é¢<br>
<code>web3.eth.getGasPrice()</code>:æ ¹æ®æœ€è¿‘å‡ ä¸ªåŒºå—ï¼Œè®¡ç®—å¹³å‡gasä»·æ ¼</p>
<p><strong>äº¤æ˜“æ‰§è¡Œç›¸å…³æ“ä½œ</strong><br>
å‘ä»¥å¤ªç½‘ç»œæäº¤ä¸€ä¸ªäº¤æ˜“ï¼š<br>
<code>web3.eth.sendTransaction(transactionObject [,callback])</code></p>
<p>transactionObjectå‚æ•°è¯´æ˜ï¼š</p>
<ul>
<li>from: å‘é€è€…åœ°å€</li>
<li>to: å¯é€‰å‚æ•°ï¼Œæ¥æ”¶è€…åœ°å€ï¼Œè‹¥å‘é€çš„ä¸ºåˆçº¦ï¼Œåˆ™ä¸ºç©º</li>
<li>value: å‘é€çš„å¸</li>
<li>gas: gasçš„é™åˆ¶</li>
<li>gsaPrice: æ¯ä¸ªgasçš„ä»·æ ¼</li>
<li>data: è‹¥å‘é€çš„ä¸ºåˆçº¦ï¼Œåˆ™ä¸ºå½“å‰åˆçº¦çš„ ABI æ–‡ä»¶ï¼Œå¦åˆ™ä¸ºè¯´æ˜ä¿¡æ¯</li>
<li>noce: è´¦æˆ·çš„å‰ä¸€ä¸ªäº¤æ˜“è®¡æ•°ï¼Œè¿™ä¸ªæ•°å¿…é¡»æ˜¯åå…­è¿›åˆ¶ï¼Œ web3.utils.toHex()è¿›è¡Œè½¬æ¢</li>
</ul>
<p><a href="./%E9%92%B1%E5%8C%85%E8%BD%AC%E9%92%B1%E5%8C%85.js">ç¤ºä¾‹ä»£ç </a></p>
<p>è¿”å›å…·æœ‰æŒ‡å®šå“ˆå¸Œå€¼çš„äº¤æ˜“å¯¹è±¡ã€æŸ¥çœ‹äº¤æ˜“ç»†èŠ‚ï¼š<br>
<code>web3.eth.getTransaction()</code></p>
<p>è¿”å›æŒ‡å®šäº¤æ˜“çš„æ”¶æ®å¯¹è±¡ï¼Œå¦‚æœäº¤æ˜“æ˜¯pendingï¼Œè¿”å›nullï¼š<br>
<code>web3.eth.getTransactionReceipt()</code></p>
<h2 id="Web3-js-åˆçº¦äº¤äº’">Web3.js åˆçº¦äº¤äº’</h2>
<p><strong>åº”ç”¨ç¨‹åºäºŒè¿›åˆ¶æ¥å£(ABI)</strong></p>
<p>ABIæ–‡ä»¶ä»¥JSONå½¢å¼è¡¨ç¤ºï¼Œåœ¨JSONæ–‡ä»¶ä¸­ï¼Œä¸èƒ½å†™æ³¨é‡Š.</p>
<p>ABIè¡¨ç°å½¢å¼ï¼šfunctionsã€events</p>
<p>ä½œç”¨ï¼šå°†è¿™äº›ABIæ–‡ä»¶ä¼ é€’ç»™web3.js(æˆ–å…¶å®ƒsdk)ï¼Œæ ¹æ®è¿™äº›æ¥å£ç±»å‹æ„å»ºå‡ºjså¯¹è±¡ï¼Œjså¯¹è±¡æ“ä½œåˆçº¦ã€‚</p>
<p><strong>åˆ›å»ºåˆçº¦</strong></p>
<p>åˆçº¦ä¸­å¯ç”¨ç¼–å†™çš„å†…å®¹ï¼šå‡½æ•°ã€ç»“æ„ä½“ã€æ„é€ å‡½æ•°ã€çŠ¶æ€å˜é‡ã€äº‹ä»¶ã€æšä¸¾ç±»å‹ç­‰ã€‚</p>
<p>åˆçº¦è¦éƒ¨ç½²åˆ°åŒºå—é“¾ï¼Œéœ€è¦ç¼–è¯‘ä¸º å­—èŠ‚ç æ–‡ä»¶(remixä¸­å¯ç›´æ¥å¤åˆ¶)ã€‚</p>
<p>åˆçº¦è¦æƒ³è¢«å¤–éƒ¨åº”ç”¨ç¨‹åºè®¿é—®ï¼Œéœ€è¦ç¼–è¯‘ ABIæ–‡ä»¶(remixä¸­å¯ç›´æ¥å¤åˆ¶)ã€‚</p>
<p><strong>jsåœ¨åŒºå—é“¾ä¸Šéƒ¨ç½²åˆçº¦</strong></p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">contract<span class="selector-class">.deploy</span>(&#123;</span><br><span class="line">  data:data</span><br><span class="line">&#125;)<span class="selector-class">.send</span>(&#123;</span><br><span class="line">  from:<span class="string">&#x27;&#x27;</span>, <span class="comment">//ä»å“ªä¸ªè´¦æˆ·å‘é€</span></span><br><span class="line">  gas:<span class="number">150000</span>,</span><br><span class="line">  gasPrice:<span class="string">&#x27;1000000&#x27;</span></span><br><span class="line">&#125;,<span class="built_in">function</span>(err,transactionHash)&#123;<span class="built_in">log</span>(transactionHash)&#125;)</span><br></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="https://github.com/liugezhou/web3.js/blob/main/deploy.js">ç¤ºä¾‹ä»£ç </a>ï¼šè¿™çš„ä»£ç æ˜¯æŒ‡ï¼Œä¸æ˜¯é€šè¿‡ remix çš„ å‘å¸ƒæŒ‰é’®ï¼Œè€Œæ˜¯é€šè¿‡è‡ªå·±å†™çš„jsè„šæœ¬å»å‘å¸ƒçš„ä¸€ä¸ªåˆçº¦ã€‚</p>
<p><strong>è°ƒç”¨åˆçº¦å‡½æ•°</strong></p>
<ol>
<li>è°ƒç”¨æ™ºèƒ½åˆçº¦è¯»(view,pure)å‡½æ•°æ—¶ï¼Œä¸€èˆ¬ä½¿ç”¨callï¼Œæ— æ”¶è´¹ï¼Œä½†æœ‰gasè´¹ã€‚</li>
</ol>
<p><code>myContract.methods.myMethod([param1 [,p2]]).call(options [,defaultBlock] [,callback])</code></p>
<ul>
<li>myMethodä¸ºåˆçº¦ä¸­çš„æ–¹æ³•å</li>
<li>params1 ä¸ºå‡½æ•°çš„å‚æ•°</li>
<li>optionså‚æ•°è¯´æ˜ï¼š
<ul>
<li>from:String å¯é€‰ è°ƒç”¨äº¤æ˜“çš„åœ°å€</li>
<li>gasPrice:String å¯é€‰ï¼Œäº¤æ˜“çš„æ¯ä¸ªGasçš„ä»·æ ¼</li>
<li>gasï¼šNumberå¯é€‰ï¼Œäº¤æ˜“çš„Gasé™åˆ¶</li>
</ul>
</li>
</ul>
<ol start="2">
<li>è°ƒç”¨æ™ºèƒ½åˆçº¦å†™å‡½æ•°ï¼šç›¸å½“äºå‘é€äº†äº¤æ˜“</li>
</ol>
<p><code>MyContract.methods.myMethod([params [,param2]]).send(options [,callback])</code></p>
<ul>
<li>optionså‚æ•°è¯´æ˜ï¼š
<ul>
<li>from:String å¯é€‰ è°ƒç”¨äº¤æ˜“çš„åœ°å€</li>
<li>gasPrice:String å¯é€‰ï¼Œäº¤æ˜“çš„æ¯ä¸ªGasçš„ä»·æ ¼</li>
<li>gasï¼šNumberå¯é€‰ï¼Œäº¤æ˜“çš„Gasé™åˆ¶</li>
</ul>
</li>
<li>è¿”å›çš„ç»“æœè§¦å‘äº‹ä»¶ï¼š
<ul>
<li>transactionHash: stringï¼Œå‘é€äº¤æ˜“ä¸”å¾—åˆ°äº¤æ˜“å“ˆå¸Œå€¼åç«‹å³è§¦å‘</li>
<li>receiptï¼šobjectã€‚ä»¥äº‹ä»¶åç§°ä¸ºé”®ï¼Œä»¥äº‹ä»¶æœ¬èº«ä¸ºå±æ€§å€¼çš„ events</li>
<li>confirmationï¼šnumberã€‚è§¦å‘æ—¶ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºæ¥æ”¶åˆ°çš„ç¡®è®¤æ•°ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºæ”¶åˆ°äº¤æ˜“æ•°æ®</li>
<li>errorï¼šäº¤æ˜“å‘ç”Ÿè¿‡ç¨‹ä¸­å‡ºé”™æ—¶è§¦å‘</li>
</ul>
</li>
</ul>
<p><strong>è°ƒç”¨åˆçº¦äº‹ä»¶</strong></p>
<p><code>MyContract.methods.emitEvent(&quot;eventName&quot;).send(options [,callback])</code></p>
<p><strong>æ‰§è¡Œäº‹ä»¶æŸ¥è¯¢</strong></p>
<p>åŒºå—é“¾æ˜¯ç”±ä¸€ä¸ªä¸ªåŒºå—ç»„æˆçš„åˆ—è¡¨ï¼Œè¿™äº›å—çš„å†…å®¹åŸºæœ¬ä¸Šæ˜¯äº¤æ˜“è®°å½•ã€‚<br>
æ¯ä¸ªäº¤æ˜“éƒ½æœ‰ä¸€ä¸ªäº¤æ˜“æ—¥å¿—ï¼Œäº‹ä»¶ç»“æœå­˜æ”¾åœ¨äº¤æ˜“æ—¥å¿—é‡Œã€‚<br>
åˆçº¦å‘å‡ºçš„äº‹ä»¶å¯ä»¥ä½¿ç”¨åˆçº¦åœ°å€è®¿é—®</p>
<p><code>MyContract.getPassEvents(event [,options] [,callback])</code></p>
<ul>
<li>event: â€˜AllEventsâ€™ //è·å–å…¨éƒ¨äº‹ä»¶</li>
</ul>
<h2 id="Web-jsåº”ç”¨æ¡ˆä¾‹">Web.jsåº”ç”¨æ¡ˆä¾‹</h2>
<p><a target="_blank" rel="noopener" href="https://github.com/liugezhou/web3.js/tree/main/demo">ä»£ç ç¤ºä¾‹</a></p>
<p><strong>éœ€æ±‚ï¼šç®€å•åˆ›å»ºæŠ•ç¥¨DApp</strong><br>
ä¸åŒºå—è¿›è¡Œé€šä¿¡çš„æ–¹å¼æ˜¯é€šè¿‡ RPCï¼ˆRemote Procedure Call)<br>
web3.jsæ˜¯ä¸€ä¸ªjsåº“ï¼ŒæŠ½è±¡å‡ºäº†æ‰€æœ‰çš„ RPC è°ƒç”¨ï¼Œä¾¿äºé€šè¿‡ jsä¸åŒºå—é“¾è¿›è¡Œäº¤äº’ã€‚<br>
å®ç°ä¸€ä¸ªæœ€ç®€å•çš„æŠ•ç¥¨DApp</p>
<p><strong>åˆ›å»ºåˆçº¦</strong><br>
å†™ä¸€ä¸ªå«åš Voting çš„åˆçº¦ï¼Œåˆçº¦çš„å†…å®¹</p>
<ul>
<li>åˆå§‹åŒ–å€™é€‰è€…</li>
<li>ç”¨æ¥æŠ•ç¥¨çš„æ–¹æ³•</li>
<li>è¿”å›å€™é€‰è€…æ‰€è·å¾—çš„æ€»ç¥¨æ•°</li>
<li><a target="_blank" rel="noopener" href="https://github.com/liugezhou/web3.js/blob/main/demo/Voting.sol">åˆçº¦ä»£ç </a></li>
</ul>
<p><strong>éƒ¨ç½²åˆçº¦</strong></p>
<p>å°†ä»¥ä¸Šsolæ–‡ä»¶åœ¨ remix ä¸­ç¼–å†™ã€‚<br>
å‘å¸ƒåˆ° External Http Providerï¼ˆé€‰æ‹©å€’æ•°ç¬¬äºŒä¸ªè´¦æˆ·å‘å¸ƒï¼‰</p>
<ul>
<li>å‘å¸ƒæ—¶ï¼Œéœ€è¦ä¼ å…¥åå…­è¿›åˆ¶å‚æ•°ï¼Œé€šè¿‡ <a target="_blank" rel="noopener" href="https://github.com/liugezhou/web3.js/blob/main/demo/DemoUtils.js">web3.utils.toHex</a> è½¬æˆä¸€ä¸ªä¸‰ä¸ªå€™é€‰äººçš„æ•°æ®åï¼Œåœ¨deployä¸­åŠ å…¥æ•°ç»„å‚æ•°ï¼Œå‘ç° remix ä¸æ”¯æŒéƒ¨ç½²</li>
<li>äºæ˜¯ä½¿ç”¨ web3.jså‘å¸ƒçš„æ–¹å¼å®ç°  <a target="_blank" rel="noopener" href="https://github.com/liugezhou/web3.js/blob/main/demo/DeployUtils.js">DeployUtils.js ä»£ç ç¤ºä¾‹</a></li>
<li>é€šè¿‡æ­¥éª¤ä¸€å‘å¸ƒï¼Œæ­¥éª¤äºŒæµ‹è¯•æ£€æŸ¥</li>
</ul>
<p><strong>ç½‘é¡µäº¤äº’</strong><br>
<a target="_blank" rel="noopener" href="https://github.com/liugezhou/drag/blob/main/src/view/HelloWorld.vue">å‰ç«¯å†…å®¹ä»£ç </a></p>
</div><div class="post-copyright"><script type="text/javascript" src="/js/copyright.js?v=1.0.3" successtext="å¤åˆ¶æˆåŠŸ!"></script><link rel="stylesheet" type="text/css" href="/css/copyright.css?v=1.0.3"><p><span>æœ¬æ–‡æ ‡é¢˜ï¼š</span>web3js å®æˆ˜åŸºæœ¬æ“ä½œ</p><p><span>æ–‡ç« ä½œè€…ï¼š</span>å…­ä¸ªå‘¨</p><p><span>å‘å¸ƒæ—¶é—´ï¼š</span>2023-02-15</p><p><span>æœ€åæ›´æ–°ï¼š</span>2024-01-29</p><p><span>åŸå§‹é“¾æ¥ï¼š</span><a href="/033-web3jså®æˆ˜åŸºæœ¬æ“ä½œ/">https://blog.liugezhou.online/033-web3js%E5%AE%9E%E6%88%98%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/</a><span class="copy-path"><i class="fa fa-clipboard" data-clipboard-text="https://blog.liugezhou.online/033-web3js%E5%AE%9E%E6%88%98%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/"></i></span></p><p><span>ç‰ˆæƒå£°æ˜ï¼š</span>æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/cn/" rel="external nofollow" target="_blank">CC BY-NC-SA 3.0 CN</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼</p></div><br><div class="tags"><a href="/tags/web3js"><i class="fa fa-tag">web3js</i></a></div><div class="post-nav"><a class="pre" href="/034-ethereum/">ä»¥å¤ªåŠåŸºç¡€ç¬”è®°</a><a class="next" href="/202306-No95/">æ¯å‘¨å°ç»“(*95):å°é…’</a></div><div id="vcomment"></div><script src="//code.bdstatic.com/npm/leancloud-storage@4.12.0/dist/av-min.js"></script><script src="//unpkg.com/valine@latest/dist/Valine.min.js"></script><script>var notify = 'false' == 'true' ? true : false;
var verify = 'false' == 'true' ? true : false;
var GUEST_INFO = ['nick','mail','link'];
var guest_info = 'nick,mail,link'.split(',').filter(function(item){
  return GUEST_INFO.indexOf(item) > -1
});
guest_info = guest_info.length == 0 ? GUEST_INFO :guest_info;
window.valine = new Valine({
  el:'#vcomment',
  notify:notify,
  verify:verify,
  appId:'Ci6gl5SnXOdXxv9BTlQx3T2F-gzGzoHsz',
  appKey:'bWsfs1hg9qURRp3gJ6SJU41x',
  placeholder:'ãƒ¾ï¾‰â‰§âˆ€â‰¦)oæ¥å•Šï¼Œå¿«æ´»å•Š!',
  avatar:'monsterid',
  guest_info:guest_info,
  pageSize:'10'
})
</script></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><div class="search-form"><input id="local-search-input" placeholder="Search" type="text" name="q" results="0"/><div id="local-search-result"></div></div></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> æ–‡ç« åˆ†ç±»</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Web3/">Web3</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Web%E6%9E%B6%E6%9E%84%E4%B9%8B%E8%84%9A%E6%89%8B%E6%9E%B6/">Webæ¶æ„ä¹‹è„šæ‰‹æ¶</a><span class="category-list-count">17</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%89%8D%E7%AB%AF%E5%B0%8F%E6%8A%80/">å‰ç«¯å°æŠ€</a><span class="category-list-count">22</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/">åšå®¢æ­å»º</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%9C%8D%E5%8A%A1%E7%AB%AF/">æœåŠ¡ç«¯</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%AF%8F%E5%91%A8%E5%B0%8F%E7%BB%93/">æ¯å‘¨å°ç»“</a><span class="category-list-count">60</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86/">æµè§ˆå™¨å·¥ä½œåŸç†</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%AF%BB%E4%B9%A6/">è¯»ä¹¦</a><span class="category-list-count">6</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> å…¶å®ƒä¸»é¡µ</i></div><ul></ul><a href="https://github.com/liugezhou" title="GitHub" target="_blank">GitHub</a><ul></ul><a href="https://twitter.com/liugezhou" title="Twitter" target="_blank">Twitter</a><ul></ul><a href="https://chat.liugezhou.online" title="è‡ªå®šä¹‰GPT" target="_blank">è‡ªå®šä¹‰GPT</a><ul></ul><a href="https://day.liugezhou.online" title="ä»Šæ—¥å‰ç«¯" target="_blank">ä»Šæ—¥å‰ç«¯</a><ul></ul><a href="https://run.liugezhou.online" title="Running" target="_blank">Running</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright Â© 2024 <a href="/." rel="nofollow">å…­ä¸ªå‘¨.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"></a><a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=1.0.3" async></script><script type="text/javascript" src="//lib.baomitu.com/fancybox/latest/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=1.0.3" async></script><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/fancybox/latest/jquery.fancybox.min.css"><link rel="stylesheet" type="text/css" href="/css/search.css?v=1.0.3"><script type="text/javascript" src="/js/search.js?v=1.0.3"></script><script>var search_path = 'search.xml';
if (search_path.length == 0) {
  search_path = 'search.xml';
}
var path = '/' + search_path;
searchFunc(path, 'local-search-input', 'local-search-result');
</script><script type="text/javascript" src="/js/love.js?v=1.0.3"></script><script type="text/javascript" src="/js/copycode.js?v=1.0.3" successtext="å¤åˆ¶æˆåŠŸ!"></script><link rel="stylesheet" type="text/css" href="/css/copycode.css?v=1.0.3"><script type="text/javascript" src="/js/codeblock-resizer.js?v=1.0.3"></script><script type="text/javascript" src="/js/smartresize.js?v=1.0.3"></script></div></body></html>